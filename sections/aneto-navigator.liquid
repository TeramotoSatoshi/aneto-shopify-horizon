{% comment %}
  ANETO Performance Navigator Section for Horizon Theme
  - This section uses React via CDN for easy maintenance.
  - Tailwind CSS is used for styling.
{% endcomment %}

<div id="aneto-navigator-{{ section.id }}" class="aneto-navigator-wrapper" style="margin-top: {{ section.settings.margin_top }}px; margin-bottom: {{ section.settings.margin_bottom }}px;">
  <div id="aneto-root-{{ section.id }}"></div>
</div>

<script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/lucide@latest"></script>
<script src="https://unpkg.com/lucide-react@latest"></script>

<script>
  (function() {
    const { useState, createElement } = React;
    const { ShoppingBag, Mountain, Zap, MapPin, Wind, Thermometer, Droplets, Info } = LucideReact;

    const App = () => {
      const [activeSeries, setActiveSeries] = useState('SWAY');
      const [activeGrade, setActiveGrade] = useState('A3');

      const seriesInfo = {
        SPEAK: {
          title: 'SPEAK',
          sub: 'peak',
          desc: '山頂との対話。過酷な環境下での防護性能と耐久性を重視したエキスパートライン。',
          icon: createElement(Mountain, { className: "w-6 h-6" }),
          color: 'bg-slate-900',
          textColor: 'text-slate-900',
        },
        GRUND: {
          title: 'GRUND',
          sub: 'run',
          desc: '大地を駆け抜ける。重力を感じさせない軽量性と、激しい運動時の放熱性に特化したライン。',
          icon: createElement(Zap, { className: "w-6 h-6" }),
          color: 'bg-sky-500',
          textColor: 'text-sky-600',
        },
        SWAY: {
          title: 'SWAY',
          sub: 'way',
          desc: '都会の道を自由に泳ぐ。街に馴染むデザインと、多収納・撥水機能を備えたアーバンライン。',
          icon: createElement(MapPin, { className: "w-6 h-6" }),
          color: 'bg-slate-500',
          textColor: 'text-slate-600',
        }
      };

      const gradeInfo = {
        A1: { label: 'A1', type: 'Minimalist', warmth: 20, water: 10, breath: 95, storage: 20 },
        A3: { label: 'A3', type: 'Balanced', warmth: 50, water: 60, breath: 60, storage: 70 },
        A5: { label: 'A5', type: 'Professional', warmth: 95, water: 95, breath: 30, storage: 90 },
      };

      const currentSpecs = gradeInfo[activeGrade];

      const SpecBar = ({ label, value, icon, color }) => (
        createElement('div', { className: "flex flex-col gap-2" },
          createElement('div', { className: "flex justify-between items-center text-[10px] md:text-xs font-bold text-slate-600" },
            createElement('div', { className: "flex items-center gap-2" },
              icon, createElement('span', null, label.toUpperCase())
            ),
            createElement('span', null, `${value}%`)
          ),
          createElement('div', { className: "w-full h-1.5 bg-slate-100 rounded-full overflow-hidden" },
            createElement('div', { 
              className: `h-full ${color} transition-all duration-700 ease-out`,
              style: { width: `${value}%` }
            })
          )
        )
      );

      const getScene = (s, g) => {
        const mapping = {
          'SPEAK-A1': '晴天時のスピード登山。パッカブルで持ち運びを優先したい時に。',
          'SPEAK-A3': '3シーズンの本格的な縦走。岩場や急な天候変化が予想されるルートに。',
          'SPEAK-A5': '厳冬期の雪山や豪雨。生命を守るための最強の防護性能が必要な時に。',
          'GRUND-A1': '真夏のトレーニングやレース。限界まで熱を逃がし、軽さを追求したい時に。',
          'GRUND-A3': '風の強い日の早朝ランニング。冷気を防ぎつつ、動きやすさを維持したい時に。',
          'GRUND-A5': '氷点下の雨中ランニング。体温を維持しながら走り続けるための特殊環境に。',
          'SWAY-A1': '初夏の旅行や日常。室内外の温度差に対応し、さらりとした着心地を求める時に。',
          'SWAY-A3': '都会のビル風や小雨を凌ぐ通勤・通学。手ぶらでスマートに移動したい時に。',
          'SWAY-A5': '真冬の都市型極地対応。カバンを持たず、最高峰の防寒性で街を歩く時に。',
        };
        return mapping[`${s}-${g}`];
      };

      return createElement('div', { className: "bg-slate-50 p-2 md:p-8 font-sans text-slate-900" },
        createElement('div', { className: "max-w-5xl mx-auto bg-white rounded-2xl md:rounded-3xl shadow-xl overflow-hidden border border-slate-100" },
          createElement('div', { className: "grid grid-cols-1 lg:grid-cols-12" },
            // Selector
            createElement('div', { className: "lg:col-span-5 p-6 md:p-8 border-r border-slate-100" },
              createElement('section', { className: "mb-8" },
                createElement('label', { className: "text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-4 block" }, "Select Series"),
                createElement('div', { className: "space-y-2" },
                  Object.keys(seriesInfo).map(key => (
                    createElement('button', {
                      key,
                      onClick: () => setActiveSeries(key),
                      className: `w-full flex items-center p-3 md:p-4 rounded-xl border-2 transition-all ${
                        activeSeries === key ? 'border-slate-900 bg-slate-900 text-white shadow-md' : 'border-slate-100 bg-white text-slate-500'
                      }`
                    },
                      createElement('div', { className: `p-2 rounded-lg mr-3 ${activeSeries === key ? 'bg-white/10' : 'bg-slate-50'}` }, seriesInfo[key].icon),
                      createElement('div', { className: "text-left" },
                        createElement('span', { className: "font-bold text-sm md:text-base" }, seriesInfo[key].title),
                        createElement('span', { className: "ml-2 text-[10px] opacity-50" }, `(${seriesInfo[key].sub})`)
                      )
                    )
                  ))
                )
              ),
              createElement('section', null,
                createElement('label', { className: "text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-4 block" }, "Select A-Grade"),
                createElement('div', { className: "grid grid-cols-3 gap-2" },
                  Object.keys(gradeInfo).map(key => (
                    createElement('button', {
                      key,
                      onClick: () => setActiveGrade(key),
                      className: `p-3 rounded-xl border-2 transition-all text-center ${
                        activeGrade === key ? 'border-slate-900 bg-slate-50 font-bold text-slate-900' : 'border-slate-100 text-slate-400'
                      }`
                    },
                      createElement('div', { className: "text-lg" }, key),
                      createElement('div', { className: "text-[8px] uppercase tracking-tighter" }, gradeInfo[key].type)
                    )
                  ))
                )
              )
            ),
            // Result
            createElement('div', { className: "lg:col-span-7 p-6 md:p-8 bg-slate-50/30" },
              createElement('div', { className: "mb-6" },
                createElement('h2', { className: `text-2xl md:text-3xl font-bold mb-2 ${seriesInfo[activeSeries].textColor}` }, `${activeSeries} ${activeGrade}`),
                createElement('p', { className: "text-slate-500 leading-relaxed text-xs md:text-sm" }, seriesInfo[activeSeries].desc)
              ),
              createElement('div', { className: "bg-white p-5 rounded-2xl shadow-sm border border-slate-100 mb-6" },
                createElement('div', { className: "space-y-4" },
                  createElement(SpecBar, { label: "Warmth", value: currentSpecs.warmth, icon: createElement(Thermometer, { className: "w-3 h-3" }), color: "bg-orange-400" }),
                  createElement(SpecBar, { label: "Waterproof", value: currentSpecs.water, icon: createElement(Droplets, { className: "w-3 h-3" }), color: "bg-blue-400" }),
                  createElement(SpecBar, { label: "Breathability", value: currentSpecs.breath, icon: createElement(Wind, { className: "w-3 h-3" }), color: "bg-emerald-400" }),
                  createElement(SpecBar, { label: "Utility", value: currentSpecs.storage, icon: createElement(ShoppingBag, { className: "w-3 h-3" }), color: "bg-slate-700" })
                )
              ),
              createElement('div', { className: "bg-slate-900 text-white p-5 rounded-2xl relative overflow-hidden" },
                createElement('div', { className: "relative z-10" },
                  createElement('h3', { className: "text-[10px] font-bold text-white/40 uppercase tracking-widest mb-3" }, "Recommended Scene"),
                  createElement('div', { className: "flex items-start gap-3" },
                    createElement('div', { className: "p-2 bg-white/10 rounded-lg shrink-0" }, createElement(Info, { className: "w-5 h-5" })),
                    createElement('p', { className: "text-sm md:text-base font-medium leading-snug" }, getScene(activeSeries, activeGrade))
                  )
                ),
                createElement('div', { className: `absolute -right-8 -bottom-8 w-24 h-24 rounded-full blur-2xl opacity-20 ${seriesInfo[activeSeries].color}` })
              )
            )
          )
        ),
        createElement('footer', { className: "mt-8 text-center text-slate-400 text-[10px]" }, "© ANETO Performance Gear Division.")
      );
    };

    document.addEventListener('DOMContentLoaded', () => {
      const rootElement = document.getElementById('aneto-root-{{ section.id }}');
      if (rootElement) {
        const root = ReactDOM.createRoot(rootElement);
        root.render(createElement(App));
      }
    });
  })();
</script>

{% schema %}
{
  "name": "ANETO Navigator",
  "settings": [
    {
      "type": "range",
      "id": "margin_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Margin Top",
      "default": 40
    },
    {
      "type": "range",
      "id": "margin_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Margin Bottom",
      "default": 40
    }
  ],
  "presets": [
    {
      "name": "ANETO Navigator"
    }
  ]
}
{% endschema %}