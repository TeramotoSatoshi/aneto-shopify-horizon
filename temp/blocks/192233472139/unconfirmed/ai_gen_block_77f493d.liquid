{% doc %}
  @prompt
    Create a custom CSS block that sets the slideshow section height to 100vh (full viewport height). The CSS should target the slideshow section and ensure it takes up the full height of the screen.
{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-custom-css-{{ ai_gen_id }} {
    display: none;
  }

  {% if block.settings.target_selector == 'slideshow' %}
    .slideshow {
      height: 100vh !important;
      min-height: 100vh !important;
    }
    
    .slideshow .slideshow__media {
      height: 100vh !important;
    }
    
    .slideshow .slideshow__slide {
      height: 100vh !important;
    }
    
    .slideshow .slideshow__text-wrapper {
      height: 100vh !important;
      display: flex;
      align-items: center;
      justify-content: center;
    }
  {% elsif block.settings.target_selector == 'custom' and block.settings.custom_selector != blank %}
    {{ block.settings.custom_selector }} {
      height: 100vh !important;
      min-height: 100vh !important;
    }
  {% endif %}

  {% if block.settings.additional_css != blank %}
    {{ block.settings.additional_css }}
  {% endif %}

  {% if block.settings.mobile_height_enabled %}
    @media screen and (max-width: 749px) {
      {% if block.settings.target_selector == 'slideshow' %}
        .slideshow {
          height: {{ block.settings.mobile_height }}vh !important;
          min-height: {{ block.settings.mobile_height }}vh !important;
        }
        
        .slideshow .slideshow__media {
          height: {{ block.settings.mobile_height }}vh !important;
        }
        
        .slideshow .slideshow__slide {
          height: {{ block.settings.mobile_height }}vh !important;
        }
        
        .slideshow .slideshow__text-wrapper {
          height: {{ block.settings.mobile_height }}vh !important;
        }
      {% elsif block.settings.target_selector == 'custom' and block.settings.custom_selector != blank %}
        {{ block.settings.custom_selector }} {
          height: {{ block.settings.mobile_height }}vh !important;
          min-height: {{ block.settings.mobile_height }}vh !important;
        }
      {% endif %}
    }
  {% endif %}
{% endstyle %}

<div class="ai-custom-css-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  {% if block.settings.show_preview %}
    <div style="
      padding: 20px;
      background-color: #f5f5f5;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      text-align: center;
      color: #666;
      font-size: 14px;
    ">
      <strong>Custom CSS Block Active</strong><br>
      {% if block.settings.target_selector == 'slideshow' %}
        Targeting: Slideshow sections (100vh height)
      {% elsif block.settings.target_selector == 'custom' and block.settings.custom_selector != blank %}
        Targeting: {{ block.settings.custom_selector }} (100vh height)
      {% else %}
        No target selected
      {% endif %}
      {% if block.settings.mobile_height_enabled %}
        <br>Mobile height: {{ block.settings.mobile_height }}vh
      {% endif %}
    </div>
  {% endif %}
</div>

{% schema %}
{
  "name": "Custom CSS for slideshow",
  "settings": [
    {
      "type": "header",
      "content": "Target selector"
    },
    {
      "type": "select",
      "id": "target_selector",
      "label": "Target element",
      "options": [
        {
          "value": "slideshow",
          "label": "Slideshow sections"
        },
        {
          "value": "custom",
          "label": "Custom selector"
        }
      ],
      "default": "slideshow"
    },
    {
      "type": "text",
      "id": "custom_selector",
      "label": "Custom CSS selector",
      "placeholder": ".my-section, #hero-banner",
      "info": "Enter CSS selector(s) to target specific elements"
    },
    {
      "type": "header",
      "content": "Mobile settings"
    },
    {
      "type": "checkbox",
      "id": "mobile_height_enabled",
      "label": "Use different height on mobile",
      "default": false
    },
    {
      "type": "range",
      "id": "mobile_height",
      "min": 50,
      "max": 100,
      "step": 5,
      "unit": "vh",
      "label": "Mobile height",
      "default": 70
    },
    {
      "type": "header",
      "content": "Additional CSS"
    },
    {
      "type": "textarea",
      "id": "additional_css",
      "label": "Additional CSS",
      "placeholder": ".my-class { color: red; }",
      "info": "Add any additional CSS rules here"
    },
    {
      "type": "header",
      "content": "Preview"
    },
    {
      "type": "checkbox",
      "id": "show_preview",
      "label": "Show preview box",
      "default": true,
      "info": "Display a preview box to confirm the block is active"
    }
  ],
  "presets": [
    {
      "name": "Custom CSS for slideshow"
    }
  ],
  "tag": null
}
{% endschema %}